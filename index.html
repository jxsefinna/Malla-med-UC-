<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Medicina UC</title>
  <script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({ startOnLoad: true });
  </script>
  <style>
    body { font-family: sans-serif; padding: 1rem; }
    .mermaid { background: #f9f9f9; padding: 1rem; border-radius: 8px; overflow-x: auto; }
    .completed { color: green; font-weight: bold; }
    .course:hover { cursor: pointer; fill: #ffeaa7; }
  </style>
</head>
<body>
  <h1>ü©∫ Malla Interactiva - Medicina UC</h1>
  <p>Haz clic sobre un curso para ver su descripci√≥n o marcarlo como completado ‚úÖ</p>

  <div class="mermaid">
    graph TD

    %% Semestre 1
    A1[Bases y Fundamentos I]
    A2[Qu√≠mica]
    A3[Psicolog√≠a M√©dica]
    A4[F√≠sica]
    A5[Biolog√≠a Molecular]

    %% Semestre 2
    B1[Bases y Fundamentos II] --> A1
    B2[Morfolog√≠a I]
    B3[Bioestad√≠stica]
    B4[Antropolog√≠a y √âtica]
    B5[Formaci√≥n General 1]

    %% Semestre 3
    C1[Morfolog√≠a II] --> B2
    C2[Inmunolog√≠a y Gen√©tica]
    C3[Razonamiento Matem√°tico]
    C4[Formaci√≥n General 2]

    %% Semestre 4
    D1[Morfolog√≠a III] --> C1
    D2[Bases y Mecanismos Enfermedad I]
    D3[Salud P√∫blica]
    D4[Formaci√≥n General 3]

    %% Semestre 5
    E1[Cl√≠nica I]
    E2[Microbiolog√≠a M√©dica]
    E3[ICM I]
    E4[Farmacolog√≠a M√©dica]

    %% Semestre 6
    F1[Cl√≠nica II] --> E1
    F2[Bases de la Pr√°ctica Profesional]
    F3[ICM II]
    F4[ICM III]

    %% Semestre 7
    G1[Cl√≠nica III] --> F1
    G2[Neurociencias]
    G3[ICM IV]
    G4[Formaci√≥n General 4]

    %% Semestre 8
    H1[Integrado Quir√∫rgico]
    H2[ICM V]
    H3[ICM VI]

    %% Semestre 9
    I1[Pediatr√≠a y Cirug√≠a Infantil]
    I2[Medicina del Adulto]
    I3[Obstetricia y Ginecolog√≠a]

    %% Semestre 10
    J1[Cirug√≠a]
    J2[Neuropsiquiatr√≠a Cl√≠nica]
    J3[Urgencias]
    J4[Dermatolog√≠a]
    J5[Oftalmolog√≠a]
    J6[Otorrinolaringolog√≠a]

    %% Semestre 11
    K1[Internado Medicina Interna]
    K2[Internado Pediatr√≠a]
    K3[Internado Obstetricia]

    %% Semestre 12
    L1[Medicina Familiar]
    L2[Internado Electivo]
    L3[Profundizaci√≥n]
  </div>

  <script>
    // Mapa de descripciones de cursos
    const courseDescriptions = {
      "Bases y Fundamentos I": "Introducci√≥n a la medicina, ciencias b√°sicas.",
      "Cl√≠nica I": "Primer contacto cl√≠nico con pacientes.",
      "ICM I": "Integrado Ciencias M√©dicas I.",
      "Medicina del Adulto": "Cl√≠nica en adultos...",
      "Formaci√≥n General 1": "Curso optativo transversal UC.",
      // ... puedes seguir completando esto
    };

    document.addEventListener("DOMContentLoaded", () => {
      const observer = new MutationObserver(() => {
        const nodes = document.querySelectorAll("g[class*=node]");
        nodes.forEach(node => {
          const label = node.querySelector("text")?.textContent;
          if (!label) return;

          node.classList.add("course");

          node.addEventListener("click", () => {
            const done = confirm(`¬øMarcar "${label}" como completado?`);
            if (done) {
              localStorage.setItem(label, "completado");
              alert(`‚úÖ ${label} marcado como completado`);
            } else if (courseDescriptions[label]) {
              alert(`üìò ${label}: ${courseDescriptions[label]}`);
            }
          });

          // Mostrar si est√° completado
          if (localStorage.getItem(label) === "completado") {
            node.querySelector("text").classList.add("completed");
          }
        });
      });

      observer.observe(document.querySelector(".mermaid"), { childList: true, subtree: true });
    });
  </script>
</body>
</html>
