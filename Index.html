<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Malla Interactiva Medicina UC</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f5f7fa;
    margin: 0; padding: 20px;
    color: #333;
  }
  h1 {
    text-align: center;
    margin-bottom: 24px;
    color: #004aad;
  }
  .grid-malla {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 14px;
    overflow-x: auto;
    padding-bottom: 40px;
  }
  .semestre {
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 12px rgb(0 0 0 / 0.1);
    padding: 14px;
    display: flex;
    flex-direction: column;
  }
  .semestre h2 {
    font-size: 1.1rem;
    color: #0f52ba;
    margin-bottom: 10px;
    border-bottom: 3px solid #0f52ba;
    padding-bottom: 6px;
    text-align: center;
  }
  .curso {
    background: #d1e0ff;
    margin: 6px 0;
    padding: 12px 14px;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 1px 6px rgb(0 0 0 / 0.1);
    transition: background-color 0.3s ease;
    position: relative;
  }
  .curso:hover {
    background: #a1c3ff;
  }
  .curso.completado {
    background: #a2f5aa;
    color: #2a5d14;
    font-weight: 600;
  }
  /* Tooltip prerrequisitos */
  .tooltip {
    position: absolute;
    top: 8px;
    right: 8px;
    background: #004aad;
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    font-size: 13px;
    line-height: 20px;
    text-align: center;
    cursor: help;
    font-weight: 700;
  }
  /* Modal */
  #modal {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.45);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 10000;
  }
  #modalContent {
    background: white;
    border-radius: 12px;
    max-width: 480px;
    width: 90%;
    padding: 24px;
    box-shadow: 0 6px 18px rgb(0 0 0 / 0.3);
    position: relative;
    font-size: 1rem;
  }
  #modalClose {
    position: absolute;
    top: 14px;
    right: 18px;
    font-size: 24px;
    cursor: pointer;
    color: #555;
    user-select: none;
  }
  #btnToggleComplete {
    margin-top: 22px;
    background: #0f52ba;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 10px 18px;
    font-weight: 700;
    cursor: pointer;
    transition: background-color 0.25s;
  }
  #btnToggleComplete:hover {
    background: #073b7a;
  }
  @media (max-width: 1024px) {
    .grid-malla {
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    }
  }
</style>
</head>
<body>

<h1>ðŸ©º Malla Interactiva Medicina UC</h1>

<div class="grid-malla" id="malla"></div>

<!-- Modal -->
<div id="modal">
  <div id="modalContent">
    <span id="modalClose">&times;</span>
    <h3 id="modalTitle"></h3>
    <p id="modalDesc"></p>
    <button id="btnToggleComplete"></button>
  </div>
</div>

<script>
  // Malla completa 12 semestres + cursos + descripciones + prerrequisitos
  const mallaData = [
    {
      semestre: 1,
      cursos: [
        { nombre: "Bases y Fundamentos I", descripcion: "IntroducciÃ³n a la medicina y ciencias bÃ¡sicas.", prereq: [] },
        { nombre: "QuÃ­mica", descripcion: "Curso de quÃ­mica general y orgÃ¡nica.", prereq: [] },
        { nombre: "PsicologÃ­a MÃ©dica", descripcion: "Fundamentos de psicologÃ­a aplicada a la medicina.", prereq: [] },
        { nombre: "FÃ­sica", descripcion: "Bases de fÃ­sica relevantes para ciencias mÃ©dicas.", prereq: [] },
        { nombre: "BiologÃ­a Molecular", descripcion: "Estudio de la biologÃ­a a nivel molecular.", prereq: [] },
      ],
    },
    {
      semestre: 2,
      cursos: [
        { nombre: "Bases y Fundamentos II", descripcion: "ContinuaciÃ³n del estudio bÃ¡sico en medicina.", prereq: ["Bases y Fundamentos I"] },
        { nombre: "MorfologÃ­a I", descripcion: "AnatomÃ­a y estructura humana bÃ¡sica.", prereq: [] },
        { nombre: "BioestadÃ­stica", descripcion: "MÃ©todos estadÃ­sticos aplicados a la salud.", prereq: [] },
        { nombre: "AntropologÃ­a y Ã‰tica", descripcion: "Aspectos sociales y Ã©ticos en medicina.", prereq: [] },
        { nombre: "FormaciÃ³n General 1", descripcion: "Cursos optativos y formaciÃ³n transversal.", prereq: [] },
      ],
    },
    {
      semestre: 3,
      cursos: [
        { nombre: "MorfologÃ­a II", descripcion: "AnatomÃ­a avanzada y tÃ©cnicas de diagnÃ³stico.", prereq: ["MorfologÃ­a I"] },
        { nombre: "InmunologÃ­a y GenÃ©tica", descripcion: "Estudio del sistema inmune y genÃ©tica humana.", prereq: [] },
        { nombre: "Razonamiento MatemÃ¡tico", descripcion: "Desarrollo del pensamiento lÃ³gico y matemÃ¡tico.", prereq: [] },
        { nombre: "FormaciÃ³n General 2", descripcion: "Cursos optativos y formaciÃ³n transversal.", prereq: [] },
      ],
    },
    {
      semestre: 4,
      cursos: [
        { nombre: "MorfologÃ­a III", descripcion: "Estudio avanzado de estructuras corporales.", prereq: ["MorfologÃ­a II"] },
        { nombre: "Bases y Mecanismos Enfermedad I", descripcion: "IntroducciÃ³n a patologÃ­as y mecanismos de enfermedad.", prereq: [] },
        { nombre: "Salud PÃºblica", descripcion: "Principios de salud colectiva y promociÃ³n.", prereq: [] },
        { nombre: "FormaciÃ³n General 3", descripcion: "Cursos optativos y formaciÃ³n transversal.", prereq: [] },
      ],
    },
    {
      semestre: 5,
      cursos: [
        { nombre: "ClÃ­nica I", descripcion: "Primer contacto clÃ­nico con pacientes.", prereq: ["Bases y Mecanismos Enfermedad I"] },
        { nombre: "MicrobiologÃ­a MÃ©dica", descripcion: "Estudio de microorganismos y su relaciÃ³n con la salud.", prereq: [] },
        { nombre: "ICM I", descripcion: "Integrado Ciencias MÃ©dicas I.", prereq: [] },
        { nombre: "FarmacologÃ­a MÃ©dica", descripcion: "Principios bÃ¡sicos de medicamentos.", prereq: [] },
      ],
    },
    {
      semestre: 6,
      cursos: [
        { nombre: "ClÃ­nica II", descripcion: "ContinuaciÃ³n de la formaciÃ³n clÃ­nica.", prereq: ["ClÃ­nica I"] },
        { nombre: "Bases de la PrÃ¡ctica Profesional", descripcion: "IntroducciÃ³n a la prÃ¡ctica mÃ©dica profesional.", prereq: [] },
        { nombre: "ICM II", descripcion: "Integrado Ciencias MÃ©dicas II.", prereq: [] },
        { nombre: "ICM III", descripcion: "Integrado Ciencias MÃ©dicas III.", prereq: [] },
      ],
    },
    {
      semestre: 7,
      cursos: [
        { nombre: "ClÃ­nica III", descripcion: "Avanzado en formaciÃ³n clÃ­nica.", prereq: ["ClÃ­nica II"] },
        { nombre: "Neurociencias", descripcion: "Estudio del sistema nervioso.", prereq: [] },
        { nombre: "ICM IV", descripcion: "Integrado Ciencias MÃ©dicas IV.", prereq: [] },
        { nombre: "FormaciÃ³n General 4", descripcion: "Cursos optativos y formaciÃ³n transversal.", prereq: [] },
      ],
    },
    {
      semestre: 8,
      cursos: [
        { nombre: "Integrado QuirÃºrgico", descripcion: "FormaciÃ³n quirÃºrgica integrada.", prereq: [] },
        { nombre: "ICM V", descripcion: "Integrado Ciencias MÃ©dicas V.", prereq: [] },
        { nombre: "ICM VI", descripcion: "Integrado Ciencias MÃ©dicas VI.", prereq: [] },
      ],
    },
    {
      semestre: 9,
      cursos: [
        { nombre: "PediatrÃ­a y CirugÃ­a Infantil", descripcion: "AtenciÃ³n mÃ©dica infantil.", prereq: [] },
        { nombre: "Medicina del Adulto", descripcion: "ClÃ­nica en adultos.", prereq: [] },
        { nombre: "Obstetricia y GinecologÃ­a", descripcion: "Salud de la mujer.", prereq: [] },
      ],
    },
    {
      semestre: 10,
      cursos: [
        { nombre: "CirugÃ­a", descripcion: "FormaciÃ³n en tÃ©cnicas quirÃºrgicas.", prereq: [] },
        { nombre: "NeuropsiquiatrÃ­a ClÃ­nica", descripcion: "PsiquiatrÃ­a y neurologÃ­a clÃ­nica.", prereq: [] },
        { nombre: "Urgencias", descripcion: "Manejo de urgencias mÃ©dicas.", prereq: [] },
        { nombre: "DermatologÃ­a", descripcion: "Estudio de enfermedades de la piel.", prereq: [] },
        { nombre: "OftalmologÃ­a", descripcion: "Salud visual y enfermedades oculares.", prereq: [] },
        { nombre: "OtorrinolaringologÃ­a", descripcion: "Estudio de oÃ­do, nariz y garganta.", prereq: [] },
      ],
    },
    {
      semestre: 11,
      cursos: [
        { nombre: "Internado Medicina Interna", descripcion: "PrÃ¡ctica clÃ­nica avanzada en medicina interna.", prereq: [] },
        { nombre: "Internado PediatrÃ­a", descripcion: "PrÃ¡ctica clÃ­nica avanzada en pediatrÃ­a.", prereq: [] },
        { nombre: "Internado Obstetricia", descripcion: "PrÃ¡ctica clÃ­nica avanzada en obstetricia.", prereq: [] },
      ],
    },
    {
      semestre: 12,
      cursos: [
        { nombre: "Medicina Familiar", descripcion: "PrÃ¡ctica y teorÃ­a en medicina familiar.", prereq: [] },
        { nombre: "Internado Electivo", descripcion: "PrÃ¡ctica electiva en Ã¡rea de interÃ©s.", prereq: [] },
        { nombre: "ProfundizaciÃ³n", descripcion: "Cursos para profundizaciÃ³n acadÃ©mica.", prereq: [] },
      ],
    },
  ];

  const malla = document.getElementById('malla');
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modalTitle');
  const modalDesc = document.getElementById('modalDesc');
  const btnToggleComplete = document.getElementById('btnToggleComplete');
  const modalClose = document.getElementById('modalClose');

  function renderMalla() {
    malla.innerHTML = '';
    mallaData.forEach(({ semestre, cursos }) => {
      const divSem = document.createElement('div');
      divSem.classList.add('semestre');
      divSem.style.gridColumn = semestre;
      const h2 = document.createElement('h2');
      h2.textContent = `Semestre ${semestre}`;
      divSem.appendChild(h2);

      cursos.forEach(curso => {
        const divCurso = document.createElement('div');
        divCurso.classList.add('curso');
        divCurso.textContent = curso.nombre;
        divCurso.dataset.nombre = curso.nombre;

        if (curso.prereq.length > 0) {
          const tooltip = document.createElement('span');
          tooltip.classList.add('tooltip');
          tooltip.title = "Prerrequisitos:\n" + curso.prereq.join('\n');
          tooltip.textContent = "i";
          divCurso.appendChild(tooltip);
        }

        if (localStorage.getItem(curso.nombre) === 'completado') {
          divCurso.classList.add('completado');
        }

        divCurso.addEventListener('click', () => openModal(curso));

        divSem.appendChild(divCurso);
      });

      malla.appendChild(divSem);
    });
  }

  function openModal(curso) {
    modalTitle.textContent = curso.nombre;
    modalDesc.textContent = curso.descripcion;
    const completado = localStorage.getItem(curso.nombre) === 'completado';

    btnToggleComplete.textContent = completado ? 'Marcar como NO completado âŒ' : 'Marcar como completado âœ…';
    btnToggleComplete.onclick = () => {
      if (completado) {
        localStorage.removeItem(curso.nombre);
      } else {
        localStorage.setItem(curso.nombre, 'completado');
      }
      renderMalla();
      closeModal();
    };

    modal.style.display = 'flex';
  }

  function closeModal() {
    modal.style.display = 'none';
  }

  modalClose.onclick = closeModal;
  window.onclick = e => {
    if (e.target === modal) closeModal();
  };

  renderMalla();
</script>

</body>
</html>
